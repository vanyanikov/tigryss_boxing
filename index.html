<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>tigryss_boxing</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body, html {
      width: 100%;
      font-family: 'Montserrat', sans-serif;
    }
    header {
      background-color: rgb(40, 40, 40);
      color: white;
      padding: 10px 20px;
      border-bottom: 2px solid rgb(40, 40, 40);
      height: 90px;
      width: 100%;
    }
    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
      text-decoration: none;
      cursor: pointer;
    }
    .logo {
      height: 60px; 
    }
    header h1 {
      margin: 0;
      font-size: 32px;
      color: white;
      user-select: none;
    }
    nav {
      background-color: rgb(40, 40, 40);
      border-bottom: 2px solid black;
      display: flex;
      justify-content: center;
      padding: 10px 0;
    }
    nav a {
      color: white;
      text-decoration: none;
      margin: 0 15px;
      padding: 10px 16px;
      border-radius: 4px;
      font-weight: 600;
      font-size: 16px;
      transition: background-color 0.3s ease;
      cursor: pointer;
      user-select: none;
    }
    nav a:hover {
      background-color: gray;
    }
    nav a.active {
      background-color: gray;
    }
    main {
      padding: 20px;
      min-height: 80vh;
      max-width: 1200px;
      margin: 0 auto;
    }
    #home-products {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 30px;
      padding: 0 20px;
      box-sizing: border-box;
      justify-items: center;
    }
    .product-card {
      width: 280px;
      background-color: white;
      border-radius: 10px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      color: black;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    .product-card:hover {
      background-color: black;
      color: white;
    }
    .product-card img {
      width: 280px;
      height: 280px;
      object-fit: cover;
      border-radius: 8px;
      transition: transform 0.3s ease;
    }
    .product-card:hover img {
      transform: scale(1.1);
    }
    .product-card h3 {
      margin: 10px 0 0;
      font-size: 18px;
      user-select: none;
    }
    .product-card:hover h3 {
      color: white;
    }
    .order-button, .cart-order-button {
      margin-top: 8px;
      padding: 8px 16px;
      background-color: #d12f2f;
      color: white;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
      font-size: 14px;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    .order-button:hover, .cart-order-button:hover {
      background-color: #a12222;
    }
    #cart-list {
      max-width: 600px;
      margin: 0 auto;
    }
    .cart-item {
      position: relative;
      padding: 12px 50px 12px 16px;
      margin-bottom: 12px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      font-size: 16px;
      user-select: none;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .delete-button {
      background-color: #d12f2f;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.3s ease, background-color 0.3s ease;
      user-select: none;
    }
    .delete-button:hover {
      background-color: #a12222;
      transform: scale(1.1);
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 0 10px rgba(0,0,0,0.25);
      position: relative;
      user-select: none;
    }
    .modal-close {
      position: absolute;
      top: 10px; right: 10px;
      cursor: pointer;
      font-size: 20px;
      font-weight: bold;
      background: none;
      border: none;
      user-select: none;
    }
    form label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
      font-size: 16px;
      user-select: none;
    }
    form input {
      width: 100%;
      padding: 8px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 15px;
    }
    form input:focus {
      outline: none;
      border-color: #d12f2f;
      box-shadow: 0 0 5px rgba(209,47,47,0.5);
    }
    form button {
      background-color: #d12f2f;
      color: white;
      border: none;
      padding: 12px 24px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.3s ease;
      width: 100%;
      font-size: 16px;
      user-select: none;
    }
    form button:hover {
      background-color: #a12222;
      transform: scale(1.05);
    }
    .error-message {
      color: #d12f2f;
      margin-bottom: 12px;
      font-weight: bold;
      font-size: 14px;
      display: none;
      user-select: none;
    }
    .success-message {
      color: green;
      margin-bottom: 12px;
      font-weight: bold;
      font-size: 14px;
      display: none;
      text-align: center;
      user-select: none;
    }
    #auth form {
      max-width: 350px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.15);
      user-select: none;
    }
    #auth label {
      font-weight: bold;
      display: block;
      margin-bottom: 5px;
    }
    #auth input {
      width: 100%;
      padding: 8px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    #auth button {
      width: 100%;
      background-color: #d12f2f;
      color: white;
      padding: 12px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    #auth button:hover {
      background-color: #a12222;
    }
    #auth .error-message {
      color: #d12f2f;
      margin-bottom: 12px;
      font-weight: bold;
      font-size: 14px;
      display: none;
    }
    #auth .success-message {
      color: green;
      margin-bottom: 12px;
      font-weight: bold;
      font-size: 14px;
      display: none;
    }
    #auth .toggle-password {
      margin-bottom: 15px;
      cursor: pointer;
      color: #555;
      font-size: 14px;
      user-select: none;
      display: inline-block;
    }
    #auth .logged-in-info {
      text-align: center;
      margin-bottom: 15px;
      font-weight: bold;
      color: green;
      user-select: none;
    }
    #auth .logout-button {
      background-color: #a12222;
      margin-top: 10px;
      width: 100%;
      user-select: none;
    }
    .delete-order {
  margin-top: 10px;
  padding: 5px 10px;
  background-color: #ff4444;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
.bg-left, .bg-right {
  position: fixed;
  top: 0;
  width: 700px;
  height: 100%;
  background-repeat: no-repeat;
  background-size: contain;
  z-index: -1;
  opacity: 0.2; /* –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å */
  pointer-events: none; /* —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª–∏ –∫–ª–∏–∫–∞–º */
}

.bg-left {
  left: 0;
  background-image: url('images/leftside_tiger.png');
}

.bg-right {
  right: 0;
  background-image: url('images/rightside_tiger.png');
}


  </style>
</head>
<body>
  <div class="bg-left"></div>
  <div class="bg-right"></div>

<header>
  <a href="#" id="logo-link" class="header-left">
    <img src="images/tigryss_logo.png" alt="Tigryss Logo" class="logo" />
    <h1>tigryss_boxing</h1>
  </a>
</header>

<nav>
  <a href="#" data-tab="home" class="active">–ì–æ–ª–æ–≤–Ω–∞</a>
  <a href="#" data-tab="cart">–ö–æ—Ä–∑–∏–Ω–∞</a>
  <a href="#" data-tab="orders">–ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
  <a href="#" data-tab="inventory">–Ü–Ω–≤–µ–Ω—Ç–∞—Ä</a>
  <a href="#" data-tab="auth">–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è</a>
</nav>

<main>
  <section id="home" class="tab-section">
    <h2>–ë–æ–∫—Å–µ—Ä—Å—å–∫—ñ —Ä—É–∫–∞–≤–∏—Ü—ñ</h2>
    <div id="home-products"></div>
  </section>

  <section id="cart" class="tab-section" style="display:none;">
    <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
    <div id="cart-list"><p>–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ—Ä–æ–∂–Ω—è.</p></div>
    <button id="cart-checkout-btn" style="display:none;">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
  </section>

  <section id="orders" class="tab-section" style="display:none;">
    <h2>–ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
    <div id="orders-list"><p>–ù–µ–º–∞—î –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å.</p></div>
  </section>

  <section id="inventory" class="tab-section" style="display:none;">
    <h2>–Ü–Ω–≤–µ–Ω—Ç–∞—Ä</h2>
    <p>–Ü–Ω—à—ñ —Ç–æ–≤–∞—Ä–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –ø—ñ–∑–Ω—ñ—à–µ üß§</p>
  </section>

  <section id="auth" class="tab-section" style="display:none;">
    <h2>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è</h2>
    <div id="auth-content">
      <div class="logged-in-info" style="display:none;">
        –í–∏ —É–≤—ñ–π—à–ª–∏ —è–∫: <span id="user-email-display"></span>
        <button class="logout-button" id="logout-btn">–í–∏–π—Ç–∏</button>
      </div>

      <form id="login-form">
        <div class="error-message" id="login-error"></div>
        <label for="email">Email:</label>
        <input type="email" id="email" required />
        <label for="password">–ü–∞—Ä–æ–ª—å:</label>
        <input type="password" id="password" required />
        <span class="toggle-password" id="toggle-password">–ü–æ–∫–∞–∑–∞—Ç–∏ –ø–∞—Ä–æ–ª—å</span>
        <button type="submit">–£–≤—ñ–π—Ç–∏</button>
        <p style="margin-top: 12px;">
          <a href="#" id="forgot-password-link">–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
        </p>
      </form>

      <form id="forgot-password-form" style="display:none;">
        <div class="error-message" id="forgot-error"></div>
        <div class="success-message" id="forgot-success"></div>
        <label for="forgot-email">–í–≤–µ–¥—ñ—Ç—å —Å–≤—ñ–π Email –¥–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è:</label>
        <input type="email" id="forgot-email" required />
        <label for="forgot-password">–ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å (—ñ–º—ñ—Ç–∞—Ü—ñ—è):</label>
        <input type="password" id="forgot-password" />
        <span class="toggle-password" id="toggle-password-forgot">–ü–æ–∫–∞–∑–∞—Ç–∏ –ø–∞—Ä–æ–ª—å</span>
        <button type="submit">–í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</button>
        <p style="margin-top: 12px;">
          <a href="#" id="back-to-login-link">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –¥–æ –≤—Ö–æ–¥—É</a>
        </p>
      </form>
    </div>
  </section>
</main>

<div id="order-modal" class="modal" style="display:none;">
  <div class="modal-content">
    <button class="modal-close" id="close-order-modal">&times;</button>
    <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h3>
    <div class="error-message" id="order-error"></div>
    <div class="success-message" id="order-success"></div>
    <form id="order-form">
      <label for="order-name">–Ü–º'—è:</label>
      <input type="text" id="order-name" required />
      <label for="order-surname">–ü—Ä—ñ–∑–≤–∏—â–µ:</label>
      <input type="text" id="order-surname" required />
      <label for="order-patronymic">–ü–æ-–±–∞—Ç—å–∫–æ–≤—ñ:</label>
      <input type="text" id="order-patronymic" required />
      <label for="order-phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É:</label>
      <input type="text" id="order-phone" required />
      <label for="order-city">–ú—ñ—Å—Ç–æ:</label>
      <input type="text" id="order-city" required />
      <label for="order-branch">–ù–æ–º–µ—Ä –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è:</label>
      <input type="text" id="order-branch" required />
      <button type="submit">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
    </form>
  </div>
</div>

<script>
const products = [
  { id: 1, name: '–ß–æ—Ä–Ω—ñ –Ω–∞ –ª–∏–ø—É—á—Ü—ñ', image: 'images/black_velcro-removebg-preview.png'},
  { id: 2, name: 'Grant –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö', image: 'images/grant_black_laces.jpg' },
  { id: 3, name: 'Winning —Å—ñ—Ä—ñ –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö', image: 'images/gray_laces.jpg' },
  { id: 4, name: 'Winning —Å—Ä—ñ–±–Ω—ñ –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö', image: 'images/metallic_laces.jpg' },
  { id: 5, name: 'Winning –±—ñ–ª—ñ –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö', image: 'images/white_laces.png' },
  { id: 6, name: 'Winning –±—ñ–ª—ñ –Ω–∞ –ª–∏–ø—É—á—Ü—ñ', image: 'images/white_velcro.png' },
  { id: 7, name: 'Winning –∂–æ–≤—Ç—ñ –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö', image: 'images/yellow_laces.jpg' },
  { id: 8, name: '–ß–æ—Ä–Ω—ñ –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö', image: 'images/black_laces.png' }, 
  { id: 9, name: '–ó–∞—Ö–∏—Å–Ω–∏–π —à–æ–ª–æ–º', image: 'images/helmet_1.png' }        
];

const fileMap = {
  '–ß–æ—Ä–Ω—ñ –Ω–∞ –ª–∏–ø—É—á—Ü—ñ': 'boxing_gloves/product_black_velcro.html',
  'Grant –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö': 'boxing_gloves/product_grant_black_laces.html',
  'Winning —Å—ñ—Ä—ñ –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö': 'boxing_gloves/product_gray_laces.html',
  'Winning —Å—Ä—ñ–±–Ω—ñ –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö': 'boxing_gloves/product_metallic_laces.html',
  'Winning –±—ñ–ª—ñ –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö': 'boxing_gloves/product_white_laces.html',
  'Winning –±—ñ–ª—ñ –Ω–∞ –ª–∏–ø—É—á—Ü—ñ': 'boxing_gloves/product_white_velcro.html',
  'Winning –∂–æ–≤—Ç—ñ –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö': 'boxing_gloves/product_yellow_laces.html',
  '–ß–æ—Ä–Ω—ñ –Ω–∞ —à–Ω—É—Ä–∫–∞—Ö': 'boxing_gloves/product_black_laces.html', 
  '–ó–∞—Ö–∏—Å–Ω–∏–π —à–æ–ª–æ–º': 'boxing_gloves/product_helmet.html'                 
};

function displayHome() {
  const homeProducts = document.getElementById('home-products');
  homeProducts.innerHTML = '';

  products.forEach(product => {
    const card = document.createElement('div');
    card.className = 'product-card';

    const productPage = fileMap[product.name] || '#';

    card.innerHTML = `
      <a href="${productPage}" style="text-decoration:none; color:inherit;">
        <img src="${product.image}" alt="${product.name}" style="width:100%; max-width:300px;" />
        <h3>${product.name}</h3>
      </a>

      <div class="size-selector">
        <label><input type="radio" name="size-${product.id}" value="10oz"> 10oz</label>
        <label><input type="radio" name="size-${product.id}" value="12oz"> 12oz</label>
        <label><input type="radio" name="size-${product.id}" value="14oz"> 14oz</label>
        <label><input type="radio" name="size-${product.id}" value="16oz"> 16oz</label>
      </div>

      <button class="order-button" data-id="${product.id}" disabled>–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
    `;

    const orderButton = card.querySelector('.order-button');
    const sizeRadios = card.querySelectorAll(`input[name="size-${product.id}"]`);

    sizeRadios.forEach(radio => {
      radio.addEventListener('change', () => {
        orderButton.disabled = false;
      });
    });

    orderButton.addEventListener('click', () => {
      const selectedSize = Array.from(sizeRadios).find(r => r.checked)?.value;
      if (!selectedSize) {
        alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∏–±–µ—Ä—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä –ø–µ—Ä–µ–¥ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è–º –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.');
        return;
      }

      addToCart({ ...product, size: selectedSize });
      showTab('cart');
    });

    homeProducts.appendChild(card);
  });
}


function addToCart(product, size) {
  let cart = JSON.parse(localStorage.getItem('cart') || '[]');
  const index = cart.findIndex(item => item.id === product.id && item.size === size);
  if (index >= 0) {
    cart[index].quantity++;
  } else {
    cart.push({ id: product.id, name: product.name, quantity: 1, size });
  }
  localStorage.setItem('cart', JSON.stringify(cart));
  displayCart();
}



  // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
  function isValidName(str) {
    return /^[A-Za-z–ê-–Ø–∞-—è–Å—ë–á—ó–Ü—ñ–Ñ—î“ê“ë\s'-]+$/.test(str.trim());
  }

  function isValidNumber(str) {
    return /^[0-9]+$/.test(str.trim());
  }

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥–∞–ª–∫–∏ –∑–∞–∫–∞–∑–∞
  const orderModal = document.getElementById('order-modal');
  const closeOrderModalBtn = document.getElementById('close-order-modal');
  const orderForm = document.getElementById('order-form');
  const errElem = document.getElementById('order-error');
  const successElem = document.getElementById('order-success');

  function openOrderModal() {
    orderModal.style.display = 'flex';
    errElem.style.display = 'none';
    successElem.style.display = 'none';
    orderForm.reset();
  }
  function closeOrderModal() {
    orderModal.style.display = 'none';
  }
  closeOrderModalBtn.addEventListener('click', closeOrderModal);
  orderModal.addEventListener('click', e => {
    if (e.target === orderModal) closeOrderModal();
  });

  orderForm.addEventListener('submit', e => {
    e.preventDefault();
    errElem.style.display = 'none';
    successElem.style.display = 'none';

    const name = document.getElementById('order-name').value.trim();
    const surname = document.getElementById('order-surname').value.trim();
    const patronymic = document.getElementById('order-patronymic').value.trim();
    const phone = document.getElementById('order-phone').value.trim();
    const city = document.getElementById('order-city').value.trim();
    const branch = document.getElementById('order-branch').value.trim();

    if (!isValidName(name)) {
      errElem.textContent = "–ü–æ–ª–µ '–Ü–º\'—è' –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –ª–∏—à–µ –ª—ñ—Ç–µ—Ä–∏.";
      errElem.style.display = 'block';
      return;
    }
    if (!isValidName(surname)) {
      errElem.textContent = "–ü–æ–ª–µ '–ü—Ä—ñ–∑–≤–∏—â–µ' –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –ª–∏—à–µ –ª—ñ—Ç–µ—Ä–∏.";
      errElem.style.display = 'block';
      return;
    }
    if (!isValidName(patronymic)) {
      errElem.textContent = "–ü–æ–ª–µ '–ü–æ-–±–∞—Ç—å–∫–æ–≤—ñ' –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –ª–∏—à–µ –ª—ñ—Ç–µ—Ä–∏.";
      errElem.style.display = 'block';
      return;
    }
    if (!isValidName(city)) {
      errElem.textContent = "–ü–æ–ª–µ '–ú—ñ—Å—Ç–æ' –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –ª–∏—à–µ –ª—ñ—Ç–µ—Ä–∏.";
      errElem.style.display = 'block';
      return;
    }
    if (!isValidNumber(phone)) {
      errElem.textContent = "–ü–æ–ª–µ '–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É' –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –ª–∏—à–µ —Ü–∏—Ñ—Ä–∏.";
      errElem.style.display = 'block';
      return;
    }
    if (phone.length < 7) {
      errElem.textContent = "–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ —â–æ–Ω–∞–π–º–µ–Ω—à–µ 7 —Ü–∏—Ñ—Ä.";
      errElem.style.display = 'block';
      return;
    }
    if (!isValidNumber(branch)) {
      errElem.textContent = "–ü–æ–ª–µ '–ù–æ–º–µ—Ä –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è' –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –ª–∏—à–µ —Ü–∏—Ñ—Ä–∏.";
      errElem.style.display = 'block';
      return;
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser) {
      alert('–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å –≤ –∞–∫–∞—É–Ω—Ç, —â–æ–± –æ—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.');
      closeOrderModal();
      showTab('auth');
      return;
    }

    // –ü–æ–ª—É—á–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    if (cart.length === 0) {
      errElem.textContent = '–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ—Ä–æ–∂–Ω—è. –î–æ–¥–∞–π—Ç–µ —Ç–æ–≤–∞—Ä–∏ –ø–µ—Ä–µ–¥ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è–º.';
      errElem.style.display = 'block';
      return;
    }

  const order = {
    id: Date.now(),
    products: cart.map(item => ({ id: item.id, name: item.name, quantity: item.quantity, size: item.size })),
    name,
    surname,
    patronymic,
    phone,
    city,
    branch,
    userEmail: currentUser.email
  };

  console.log('–î–æ–¥–∞—î–º–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:', order); // <-- —Å—é–¥–∞

  const orders = JSON.parse(localStorage.getItem('orders') || '[]');
  orders.push(order);
  localStorage.setItem('orders', JSON.stringify(orders));

    // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
    localStorage.removeItem('cart');

    successElem.textContent = '–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ!';
    successElem.style.display = 'block';

    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ—Ä–∑–∏–Ω—É –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É
    setTimeout(() => {
      closeOrderModal();
      displayCart();
      showTab('orders');
    }, 1500);
  });

  // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤–≤–æ–¥–∞ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ –ø–æ–ª—è—Ö —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞
  ['order-name', 'order-surname', 'order-patronymic', 'order-city'].forEach(id => {
    const el = document.getElementById(id);
    el.addEventListener('input', e => {
      e.target.value = e.target.value.replace(/[^A-Za-z–ê-–Ø–∞-—è–Å—ë–á—ó–Ü—ñ–Ñ—î“ê“ë\s'-]/g, '');
    });
  });
  ['order-phone', 'order-branch'].forEach(id => {
    const el = document.getElementById(id);
    el.addEventListener('input', e => {
      e.target.value = e.target.value.replace(/[^0-9]/g, '');
    });
  });

  // –ö–Ω–æ–ø–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
  document.getElementById('cart-checkout-btn').addEventListener('click', () => {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser) {
      alert('–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å –≤ –∞–∫–∞—É–Ω—Ç, —â–æ–± –æ—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.');
      showTab('auth');
      return;
    }
    openOrderModal();
  });

  // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
  const loginForm = document.getElementById('login-form');
  const loginError = document.getElementById('login-error');
  const loggedInInfo = document.querySelector('#auth .logged-in-info');
  const userEmailDisplay = document.getElementById('user-email-display');
  const logoutBtn = document.getElementById('logout-btn');
  const togglePassword = document.getElementById('toggle-password');
  const passwordInput = document.getElementById('password');

  togglePassword.addEventListener('click', () => {
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      togglePassword.textContent = '–°—Ö–æ–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å';
    } else {
      passwordInput.type = 'password';
      togglePassword.textContent = '–ü–æ–∫–∞–∑–∞—Ç–∏ –ø–∞—Ä–æ–ª—å';
    }
  });

  loginForm.addEventListener('submit', e => {
    e.preventDefault();
    loginError.style.display = 'none';
    loginError.textContent = '';

    const email = loginForm.email.value.trim().toLowerCase();
    const password = loginForm.password.value;

    if (!email || !password) {
      loginError.textContent = '–í–≤–µ–¥—ñ—Ç—å email —ñ –ø–∞—Ä–æ–ª—å.';
      loginError.style.display = 'block';
      return;
    }

    let users = JSON.parse(localStorage.getItem('users') || '[]');
    let user = users.find(u => u.email === email);
    if (!user) {
      // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è
      user = { email, password };
      users.push(user);
      localStorage.setItem('users', JSON.stringify(users));
    } else {
      if (user.password !== password) {
        loginError.textContent = '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å.';
        loginError.style.display = 'block';
        return;
      }
    }

    localStorage.setItem('currentUser', JSON.stringify(user));
    updateAuthUI();
    alert('–í–∏ —É–≤—ñ–π—à–ª–∏ –≤ –∞–∫–∞—É–Ω—Ç!');
    showTab('home');
  });

  function updateAuthUI() {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (currentUser) {
      loggedInInfo.style.display = 'block';
      userEmailDisplay.textContent = currentUser.email;
      loginForm.style.display = 'none';
      forgotPasswordForm.style.display = 'none';
    } else {
      loggedInInfo.style.display = 'none';
      loginForm.style.display = 'block';
      forgotPasswordForm.style.display = 'none';
      loginError.style.display = 'none';
      loginError.textContent = '';
    }
  }

  logoutBtn.addEventListener('click', () => {
    localStorage.removeItem('currentUser');
    updateAuthUI();
  });

  const forgotPasswordLink = document.getElementById('forgot-password-link');
  const backToLoginLink = document.getElementById('back-to-login-link');
  const forgotPasswordForm = document.getElementById('forgot-password-form');
  const forgotError = document.getElementById('forgot-error');
  const forgotSuccess = document.getElementById('forgot-success');
  const forgotEmailInput = document.getElementById('forgot-email');
  const forgotPasswordInput = document.getElementById('forgot-password');
  const togglePasswordForgot = document.getElementById('toggle-password-forgot');

  forgotPasswordLink.addEventListener('click', e => {
    e.preventDefault();
    loginForm.style.display = 'none';
    forgotPasswordForm.style.display = 'block';
    forgotError.style.display = 'none';
    forgotSuccess.style.display = 'none';
    forgotEmailInput.value = '';
    forgotPasswordInput.value = '';
  });

  backToLoginLink.addEventListener('click', e => {
    e.preventDefault();
    forgotPasswordForm.style.display = 'none';
    loginForm.style.display = 'block';
    forgotError.style.display = 'none';
    forgotSuccess.style.display = 'none';
  });

  togglePasswordForgot.addEventListener('click', () => {
    if (forgotPasswordInput.type === 'password') {
      forgotPasswordInput.type = 'text';
      togglePasswordForgot.textContent = '–°—Ö–æ–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å';
    } else {
      forgotPasswordInput.type = 'password';
      togglePasswordForgot.textContent = '–ü–æ–∫–∞–∑–∞—Ç–∏ –ø–∞—Ä–æ–ª—å';
    }
  });

  forgotPasswordForm.addEventListener('submit', e => {
    e.preventDefault();
    forgotError.style.display = 'none';
    forgotSuccess.style.display = 'none';
    const email = forgotEmailInput.value.trim().toLowerCase();
    const newPassword = forgotPasswordInput.value;

    if (!email) {
      forgotError.textContent = '–í–≤–µ–¥—ñ—Ç—å email.';
      forgotError.style.display = 'block';
      return;
    }

    let users = JSON.parse(localStorage.getItem('users') || '[]');
    let user = users.find(u => u.email === email);

    if (!user) {
      forgotError.textContent = '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ç–∞–∫–∏–º email –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.';
      forgotError.style.display = 'block';
      return;
    }

    if (!newPassword) {
      forgotError.textContent = '–í–≤–µ–¥—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å.';
      forgotError.style.display = 'block';
      return;
    }

    user.password = newPassword;
    localStorage.setItem('users', JSON.stringify(users));
    forgotSuccess.textContent = '–ü–∞—Ä–æ–ª—å —É—Å–ø—ñ—à–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–æ! –¢–µ–ø–µ—Ä –º–æ–∂–µ—Ç–µ —É–≤—ñ–π—Ç–∏.';
    forgotSuccess.style.display = 'block';

    setTimeout(() => {
      forgotPasswordForm.style.display = 'none';
      loginForm.style.display = 'block';
      forgotSuccess.style.display = 'none';
    }, 2000);
  });

function displayCart() {
  const cartList = document.getElementById('cart-list');
  const checkoutBtn = document.getElementById('cart-checkout-btn');
  cartList.innerHTML = '';
  let cart = JSON.parse(localStorage.getItem('cart') || '[]');

  if (cart.length === 0) {
    cartList.innerHTML = '<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ—Ä–æ–∂–Ω—è.</p>';
    checkoutBtn.style.display = 'none';
    return;
  }

  cart.forEach(item => {
    const div = document.createElement('div');
    div.className = 'cart-item';
    div.textContent = `${item.name} ‚Äî –†–æ–∑–º—ñ—Ä: ${item.size} ‚Äî –ö—ñ–ª—å–∫—ñ—Å—Ç—å: ${item.quantity}`;

    const delBtn = document.createElement('button');
    delBtn.className = 'delete-button';
    delBtn.textContent = '–í–∏–¥–∞–ª–∏—Ç–∏';
    delBtn.addEventListener('click', () => {
      if (confirm(`–í–∏–¥–∞–ª–∏—Ç–∏ —Ç–æ–≤–∞—Ä "${item.name}" (—Ä–æ–∑–º—ñ—Ä: ${item.size}) –∑ –∫–æ—Ä–∑–∏–Ω–∏?`)) {
        deleteFromCart(item.id, item.size);
      }
    });

    div.appendChild(delBtn);
    cartList.appendChild(div);
  });

  checkoutBtn.style.display = 'block';
}


function deleteFromCart(id, size) {
  let cart = JSON.parse(localStorage.getItem('cart') || '[]');
  cart = cart.filter(item => !(item.id === id && item.size === size));
  localStorage.setItem('cart', JSON.stringify(cart));
  displayCart();
}


function displayOrders() {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  const ordersList = document.getElementById('orders-list');

  if (!currentUser || !currentUser.email) {
    ordersList.innerHTML = '<p>–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å —É —Å–≤—ñ–π –∞–∫–∞—É–Ω—Ç, —â–æ–± –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.</p>';
    return;
  }

  let orders = JSON.parse(localStorage.getItem('orders') || '[]');
  console.log('–í—Åi –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:', orders);

  orders = orders.filter(o => o.userEmail === currentUser.email);
  console.log('–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:', orders);

  if (orders.length === 0) {
    ordersList.innerHTML = '<p>–ù–µ–º–∞—î –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å.</p>';
    return;
  }

  ordersList.innerHTML = ''; // –æ—á–∏—â–∞—î–º–æ –ø–µ—Ä–µ–¥ –¥–æ–¥–∞–≤–∞–Ω–Ω—è–º

  orders.forEach(order => {
    if (!order.products || !Array.isArray(order.products)) return; // –ø—Ä–æ–ø—É—Å–∫–∞—î–º–æ –ø–æ–ª–∞–º–∞–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

    const orderDiv = document.createElement('div');
    orderDiv.className = 'order-item';
    orderDiv.style.border = '1px solid #ccc';
    orderDiv.style.padding = '10px';
    orderDiv.style.marginBottom = '15px';
    orderDiv.style.borderRadius = '8px';

    let html = `<strong>–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Ññ${order.id}</strong><br>`;
    html += `<em>–Ü–º'—è:</em> ${order.name} ${order.surname} ${order.patronymic}<br>`;
    html += `<em>–¢–µ–ª–µ—Ñ–æ–Ω:</em> ${order.phone}<br>`;
    html += `<em>–ú—ñ—Å—Ç–æ:</em> ${order.city}<br>`;
    html += `<em>–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è:</em> ${order.branch}<br>`;
    html += `<em>–¢–æ–≤–∞—Ä–∏:</em><ul>`;

    order.products.forEach(p => {
      html += `<li>${p.name} ‚Äî –†–æ–∑–º—ñ—Ä: ${p.size || '–Ω–µ –≤–∫–∞–∑–∞–Ω–æ'} ‚Äî ${p.quantity} —à—Ç.</li>`;
    });

    html += '</ul>';

    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è
    html += `<button class="delete-order" data-id="${order.id}" style="
      margin-top:10px; 
      padding:5px 10px; 
      background-color:#ff4444; 
      color:white; 
      border:none; 
      border-radius:5px; 
      cursor:pointer;
    ">–í–∏–¥–∞–ª–∏—Ç–∏</button>`;

    orderDiv.innerHTML = html;
    ordersList.appendChild(orderDiv);
  });

  // –ü–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤ ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
  document.querySelectorAll('.delete-order').forEach(btn => {
    btn.addEventListener('click', function () {
      const orderId = parseInt(this.dataset.id);

      if (!confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è?')) {
        return;
      }

      let orders = JSON.parse(localStorage.getItem('orders') || '[]');
      orders = orders.filter(o => o.id !== orderId);
      localStorage.setItem('orders', JSON.stringify(orders));
      displayOrders(); // –æ–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
    });
  });
}


  // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
  const tabs = document.querySelectorAll('nav a');
  const tabSections = document.querySelectorAll('main section.tab-section');

  function showTab(name) {
    tabSections.forEach(sec => sec.style.display = 'none');
    const target = document.getElementById(name);
    if (target) target.style.display = 'block';

    tabs.forEach(tab => tab.classList.remove('active'));
    tabs.forEach(tab => {
      if (tab.getAttribute('data-tab') === name) tab.classList.add('active');
    });

    if (name === 'home') displayHome();
    if (name === 'cart') displayCart();
    if (name === 'orders') displayOrders();
    if (name === 'auth') updateAuthUI();
  }

  tabs.forEach(tab => {
    tab.addEventListener('click', e => {
      e.preventDefault();
      const tabName = tab.getAttribute('data-tab');
      showTab(tabName);
    });
  });

  // –õ–æ–≥–∏–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –ª–æ–≥–æ—Ç–∏–ø—É - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
  document.getElementById('logo-link').addEventListener('click', e => {
    e.preventDefault();
    showTab('home');
  });

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  window.addEventListener('load', () => {
    showTab('home');
    updateAuthUI();
  });
</script>

</body>
</html>
